{"version":3,"sources":["./$_lazy_route_resource lazy namespace object","./src/app/404/page-not-found.component.ts","./src/app/404/page-not-found.component.html","./src/app/app-routing.module.ts","./src/app/app.component.ts","./src/app/app.component.html","./src/app/app.module.ts","./src/app/client/client.component.ts","./src/app/client/client.component.html","./src/app/core/com.service.ts","./src/app/core/to-safe.pipe.ts","./src/app/manage/manage.component.ts","./src/app/manage/manage.component.html","./src/app/server/server.component.ts","./src/app/server/server.component.html","./src/app/shared/chat-content/chat-content.component.ts","./src/app/shared/chat-content/chat-content.component.html","./src/app/shared/chat-unread/chat-unread.component.ts","./src/app/shared/chat-unread/chat-unread.component.html","./src/app/shared/edit-operate/edit-operate.component.ts","./src/app/shared/edit-operate/edit-operate.component.html","./src/app/shared/send-area/send-area.component.ts","./src/app/shared/send-area/send-area.component.html","./src/assets/js/calendar.js","./src/environments/environment.ts","./src/main.ts"],"names":["undefined","_global","extend","def","opt","override","k","hasOwnProperty","formartDate","y","m","d","symbol","toString","Schedule","curDate","date","Date","year","getFullYear","month","getMonth","day","getDate","currentYear","currentMonth","currentDay","selectedDate","el","document","querySelector","_this","bindEvent","addEventListener","e","target","id","nextMonthFun","nextYearFun","prevMonthFun","prevYearFun","className","indexOf","clickCb","innerHTML","title","render","init","scheduleHd","scheduleWeek","scheduleBd","fullDay","startWeek","getDay","total","lastMonthDay","eleTemp","i","push","nowDate","addClass","join","nextMonthCb","nextYeayCb","prevMonthCb","prevYearCb","eval","module","exports","define"],"mappings":"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","file":"main.js","sourcesContent":["function webpackEmptyAsyncContext(req) {\n\t// Here Promise.resolve().then() is used instead of new Promise() to prevent\n\t// uncaught exception popping up in devtools\n\treturn Promise.resolve().then(function() {\n\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\te.code = 'MODULE_NOT_FOUND';\n\t\tthrow e;\n\t});\n}\nwebpackEmptyAsyncContext.keys = function() { return []; };\nwebpackEmptyAsyncContext.resolve = webpackEmptyAsyncContext;\nmodule.exports = webpackEmptyAsyncContext;\nwebpackEmptyAsyncContext.id = \"./$$_lazy_route_resource lazy recursive\";","import { Component, OnInit } from '@angular/core';\nimport {Router} from '@angular/router';\n\n@Component({\n  selector: 'app-page-not-found',\n  templateUrl: './page-not-found.component.html',\n  styleUrls: ['./page-not-found.component.css']\n})\nexport class PageNotFoundComponent implements OnInit {\n\n  constructor() { }\n\n  pageHeight: number;\n  pageWidth: number;\n\n  ngOnInit() {\n    this.pageHeight = window.innerHeight;\n    this.pageWidth = window.innerWidth;\n    console.log({\n      DATA: this.pageHeight,\n      SDGS:  this.pageWidth\n    })\n    window.onresize = (event) => {\n      this.pageHeight = window.innerHeight;\n      this.pageWidth = window.innerWidth;\n    };\n  }\n\n}\n","<div class=\"d-flex justify-content-center align-items-center \" style=\"font-size: 40px;height: 100%;\">\n  <div class=\"\">\n    <div style=\"font-size: 200%;\">404</div>\n    <div>Page Not Found</div>\n    <a [routerLink]=\"[ '/' ]\" [ngStyle]=\"{'font-size': '14px'}\">back to index page</a>\n  </div>\n</div>\n","import { NgModule } from '@angular/core';\nimport { Routes, RouterModule } from '@angular/router';\nimport { FormsModule, ReactiveFormsModule } from '@angular/forms';\nimport { ClientComponent } from './client/client.component';\nimport { ServerComponent } from './server/server.component';\nimport { ManageComponent } from './manage/manage.component';\nimport { PageNotFoundComponent } from './404/page-not-found.component';\nconst routes: Routes = [\n  { path:'auth',loadChildren:()=>import('./auth/auth.module').then(mod=>mod.AuthModule)},\n  { path: 'client', component: ClientComponent },\n  { path: 'server', component: ServerComponent  },\n  { path: 'manage', component: ManageComponent  },\n  { path:'',redirectTo:'/client',pathMatch:'full'},\n  { path: '**', component:   PageNotFoundComponent},\n];\n\n@NgModule({\n  imports: [RouterModule.forRoot(routes), FormsModule, ReactiveFormsModule],\n  exports: [RouterModule],\n})\nexport class AppRoutingModule {}\n","import { Component,OnInit } from '@angular/core';\nimport {ComService} from  './core/com.service'\n \n\n@Component({\n  selector: 'app-root',\n  templateUrl: './app.component.html',\n  styleUrls: ['./app.component.css'],\n})\nexport class AppComponent implements OnInit {\n  \n  constructor(public com :ComService){\n\n  }\n  ngOnInit(): void {    \n  }\n\n   \n  \n}\n"," \r\n<router-outlet></router-outlet>\r\n<div class=\"alert \" [class]=\"com.alert?.show?'':'d-none'\">{{com.alert?.msg}}</div>\r\n\r\n<div class=\"mask ie-scroll other-scroll\" *ngIf=\"com.previewOption.isShowMask\" (click)=\"com.previewOption.isShowMask= false\">\r\n    <img [src]=\"com.previewOption.src\"  onerror=\"this.src='/assets/images/error.jpg'\">\r\n</div>\r\n ","import { BrowserModule } from '@angular/platform-browser';\nimport { NgModule } from '@angular/core';\nimport { AppRoutingModule } from './app-routing.module';\nimport { AppComponent } from './app.component';\nimport { FormsModule, ReactiveFormsModule } from '@angular/forms';\nimport { HttpClientModule } from '@angular/common/http';\nimport { BrowserAnimationsModule } from '@angular/platform-browser/animations';\nimport { ClientComponent } from './client/client.component';\nimport { ServerComponent } from './server/server.component';\nimport { ManageComponent } from './manage/manage.component';\nimport { PageNotFoundComponent } from './404/page-not-found.component';\nimport { SendAreaComponent } from './shared/send-area/send-area.component';\nimport { EditOperateComponent } from './shared/edit-operate/edit-operate.component';\nimport { ChatContentComponent } from './shared/chat-content/chat-content.component';\nimport {ToSafePipe} from './core/to-safe.pipe';\nimport { ChatUnreadComponent } from './shared/chat-unread/chat-unread.component'\n\n\n@NgModule({\n  declarations: [\n    AppComponent,\n    ClientComponent,\n    ServerComponent,\n    ManageComponent,\n    PageNotFoundComponent,\n    SendAreaComponent,\n    EditOperateComponent,\n    ChatContentComponent,\n    ToSafePipe,\n    ChatUnreadComponent\n  ],\n  imports: [\n    BrowserModule,\n    AppRoutingModule,\n    FormsModule,\n    ReactiveFormsModule,\n    HttpClientModule,\n    BrowserAnimationsModule,\n    HttpClientModule\n  ],\n  bootstrap: [AppComponent]\n})\nexport class AppModule { }\n","import { Component, OnInit, SimpleChanges } from '@angular/core';\nimport { ActivatedRoute, Params } from '@angular/router';\nimport { ComService } from '../core/com.service';\n\n@Component({\n  selector: 'app-client',\n  templateUrl: './client.component.html',\n  styleUrls: ['./client.component.css'],\n})\nexport class ClientComponent implements OnInit {\n  constructor(private com: ComService, private route: ActivatedRoute) {}\n  chatList:any = [];\n  ws:any;\n  myID:number;\n  chatElem :any;\n  keepEnd:boolean = false;\n  // 文件列表\n  files :any []=[] ;\n  // 编辑框数组\n  editData:any =[];\n  cuFile:any ;\n  unreadOption:any={unread:0};\n  historyLen :number=0;\n  ngOnInit(): void {\n    // domain=xx&mall=xxx\n    let search =  window.location.search.substring(1);  \n    let random = Date.now().toString();\n    this.com.pollingStart(this,random,search);\n    \n    this.chatElem = document.getElementById('chat');    \n  }\n  chatScroll(e){\n    //console.log('chatScroll: ', e.target.scrollTop);\n    \n  }\n\n  /*toBottom(){     \n    this.unreadOption.unread = 0;\n    this.unreadOption.id = [];\n    this.unreadOption.chatID = '';\n    this.chatElem.scrollTop = this.chatElem.scrollHeight  ;\n  }*/\n  \n  sendListen(content){    \n    content.isServer = false;\n    content.position= false;\n    this.chatList.push(content);\n  }\n  fileEmiter(e){\n    this.keepEnd = !this.keepEnd;\n  }\n \n \n}\n","<div class=\"container  clearfix\" id=\"main\">\n\n  <div class=\"title bg-base noselect \" id=\"title\">\n    <img src=\"assets/images/logo.png\" ondragStar=\"return false\" class=\"vm\" id=\"logo\">\n    <span>在线客服</span>\n  </div>\n\n  <div class=\"content pos-r\">\n\n    <div class=\"chat ie-scroll  other-scroll\" id='chat' (scroll)=\"chatScroll($event)\">\n      <div class=\"chat-details \">\n        <!-- 提示信息 -->\n        <div>\n          <p>商城客服工作时间为工作日的9:00~21:00</p>\n        </div>\n\n       <chat-content [chatList]=\"chatList\" (sendListen)=\"sendListen($event)\"></chat-content>\n       <a [href]=\"'/client#'+unreadOption.chatID\"   *ngIf=\"unreadOption.chatID\"  id=\"linkToChatID\">占位</a>\n        <!-- 客服 \n\n            <p class=\"dialog\">\n                    <span class=\"iconfont icon-yonghu3 text-lighter-base vb-before mr-1\"></span>\n                    <span class=\"chat-content  bg-light-base tleft pos-r\">\n                        <span class=\"chat-content-txt text-left client-content \"><img src=\"http://demo.cssmoban.com/cssthemes5/cpts_1383_cij/assets/images/slider_img1.png\" style=\"max-width:100%\"></span>\n                    </span>\n                </p>\n            <p class=\"dialog text-right\">\n                <span class=\"chat-content  bg-light-base tright pos-r mr-1 text-left\">\n                    <span>请问您现在停留在哪个页面，是在订单确认还是银联付款页面?请问您现在停留在哪个页面，是在订单确认还是银联付款页面</span>\n                </span>\n                <span class=\"iconfont icon-kefu text-lighter-base vb-before \"></span>\n            </p>\n            <p class=\"dialog text-right\">\n\n                <span class=\"chat-content  bg-light-base tright pos-r mr-1 text-left\">\n                    <span><img src=\"http://demo.cssmoban.com/cssthemes5/cpts_1383_cij/assets/images/slider_img1.png\" style=\"max-width:100%\"></span>\n                </span>\n                <span class=\"iconfont icon-kefu text-lighter-base vb-before \"></span>\n            </p>  \n            <p class=\"time\">2019/02/08 10:11:11</p>-->\n            <chat-unread [who]=\"this\" [unread]=\"unreadOption.unread\"></chat-unread>\n      </div>\n    </div>\n    <div class=\"edit-area\" id=\"edit\">\n      <edit-operate [who]=\"this\" (fileEmiter)=\"fileEmiter($event)\"></edit-operate>\n      <send-area   (sendListen)=\"sendListen($event)\" [keepEnd]=\"keepEnd\" [who]=\"this\"></send-area>\n    </div>\n  </div>\n</div>","import {\n  HttpClient,\n  HttpErrorResponse,\n  HttpEventType,\n  HttpRequest,\n  HttpResponse,\n} from '@angular/common/http';\nimport { Injectable } from '@angular/core';\nimport { Router } from '@angular/router';\nimport { throwError } from 'rxjs';\nimport { catchError, last } from 'rxjs/operators';\n@Injectable({\n  providedIn: 'root',\n})\nexport class ComService {\n  // 错误消息提示\n  alert: { msg: string; show: boolean } = { msg: '', show: false };\n  ws: any;\n  data: any = {};\n  previewOption: { isShowMask: boolean; src?: string } = {\n    isShowMask: false,\n  };\n\n  api = {\n    login: '/api/auth/login', //post\n    register: '/api/auth/register', //post\n    message: '/api/message/', //post\n    polling: '/api/message/polling', //get\n    history: '/api/message/record', //get\n    userList: '/api/user/list', // get\n    logout: '/api/auth/logout', //post\n    userInfo: '/api/user/', //{uid},get\n    files: '/file/', // 上传文件\n  };\n  who: any = null; // 是客服对象还是客户对象\n  isLogin: boolean = true;\n  constructor(private http: HttpClient, private router: Router) {\n    this.windowActive();\n  }\n  isWindowActive: boolean = true;\n  // 格式化时间\n  formatTime(\n    date: string | number | Date = '' /* 日期，可选默认今天 */,\n    fmt = 'YYYY-MM-DD' /*格式字符串默认YYYY-MM-DD hh:mm:ss */\n  ) {\n    //兼容ios\n    if (typeof date === 'string') {\n      date = date.replace(/-/g, '/');\n    }\n    date = date ? new Date(date) : new Date();\n    var o = {\n      'Y+': date.getFullYear(), //年\n      'M+': date.getMonth() + 1, //月份\n      'D+': date.getDate(), //日\n      'h+': date.getHours(), //小时\n      'm+': date.getMinutes(), //分\n      's+': date.getSeconds(), //秒\n      'q+': Math.floor((date.getMonth() + 3) / 3), //季度\n      S: date.getMilliseconds(), //毫秒\n    };\n    if (/(Y+)/.test(fmt)) {\n      fmt = fmt.replace(RegExp.$1, (o['Y+'] + '').substr(4 - RegExp.$1.length));\n    }\n    for (var k in o) {\n      if (new RegExp('(' + k + ')').test(fmt)) {\n        fmt = fmt.replace(\n          RegExp.$1,\n          RegExp.$1.length == 1\n            ? o[k]\n            : ('00' + o[k]).substr(('' + o[k]).length)\n        );\n      }\n    }\n    return fmt;\n  }\n  timeFromNow(time) {\n    //时间转换\n    const timestamp = Date.now();\n    const createTime = new Date(time);\n    time = createTime.getTime();\n    const diff = timestamp - time;\n    if (diff < 60 * 1000) {\n      return '';\n    } else if (diff < 60 * 60 * 1000) {\n      return Math.floor(diff / (60 * 1000)) + '分钟前';\n    } else if (diff < 24 * 60 * 60 * 1000) {\n      return Math.floor(diff / (60 * 60 * 1000)) + '小时前';\n    } else {\n      return this.formatTime(time, 'YYYY-MM-DD hh:mm');\n    }\n  }\n  windowActive() {\n    var hiddenProperty =\n      'hidden' in document\n        ? 'hidden'\n        : 'webkitHidden' in document\n        ? 'webkitHidden'\n        : 'mozHidden' in document\n        ? 'mozHidden'\n        : null;\n    var visibilityChangeEvent = hiddenProperty.replace(\n      /hidden/i,\n      'visibilitychange'\n    );\n    var onVisibilityChange = function () {\n      if (document[hiddenProperty]) {\n        // 未激活状态！-发送桌面通知\n        this.isWindowActive = true;\n      } else {\n        // '激活状态！\n        this.isWindowActive = false;\n      }\n    };\n    document.addEventListener(visibilityChangeEvent, onVisibilityChange);\n    window.onblur = () => {\n      \n      this.isWindowActive = false;\n    };\n    window.onfocus = () => {\n      \n      // 激活窗口- 未读消息\n      this.sendReadedMsg();\n      this.isWindowActive = true;\n    };\n  }\n  showAlert(msg) {\n    this.alert.show = true;\n    this.alert.msg = msg;\n    setTimeout(() => {\n      this.alert.show = false;\n    }, 2000);\n  }\n\n  doHttpResponse(res, success, fail?) {\n    let code = res.code;\n    if (code) {\n      if (code === 3 || code === 6) {\n        // 未登录\n        this.isLogin = false;\n        this.showAlert('登录失效，请重新登录');\n        setTimeout(() => {\n          this.router.navigate(['/auth/login']);\n        }, 2000);\n      } else {\n        fail ? fail(res) : this.showAlert(res.msg);\n      }\n    } else {\n      // 成功\n      success && success(res.data);\n    }\n  }\n  // 发送消息\n  sendMsg(msg, success?, fail?) {\n    this.http\n      .post(this.api.message, msg)\n      .pipe(\n        catchError(\n          this.handleError('sendMsg', () => {\n            fail && fail();\n          })\n        )\n      )\n      .subscribe((res) => {\n        this.doHttpResponse(\n          res,\n          (data) => {\n            success && success(data);\n          },\n          fail\n        );\n      });\n  }\n  private handleError(uri: string, failCallback?) {\n    return (error: HttpErrorResponse) => {\n      if (failCallback) {\n        setTimeout(() => {\n          failCallback();\n        }, 3000);\n      } else {\n        this.showAlert('http request ' + uri + ' error ');\n      }\n\n      if (error.error instanceof ErrorEvent) {\n        // A client-side or network error occurred. Handle it accordingly.\n        console.error(\n          'A client-side or network error occurred. Handle it accordingly.'\n        );\n        this.showAlert('网络错误');\n      } else {\n        // The backend returned an unsuccessful response code.\n        // The response body may contain clues as to what went wrong.\n        console.error(\n          `Backend returned code ${error.status}, ` + `body was: ${error.error}`\n        );\n        this.showAlert('后端服务器错误');\n      }\n      // Return an observable with a user-facing error message.\n      return throwError('Something bad happened; please try again later.');\n    };\n  }\n  // 开启轮询\n  pollingStart(obj, random: string, domain?: string) {\n    !this.who && (this.who = obj);\n    let options: any = {\n      observe: 'response',\n    };\n\n    this.http\n      .get(\n        this.api.polling + '?random=' + random + (domain ? '&' + domain : ''),\n        options\n      )\n      .pipe(\n        catchError(\n          this.handleError('polling', () => {\n            this.pollingStart(obj, random, domain);\n          })\n        )\n      )\n      .subscribe((res: any) => {\n        if (!obj.myID) {\n          obj.myID = Number(res.headers.get('Uid'));\n        }\n        // 新建立的连接，要渲染历史记录\n        let isNewConnect = res.headers.get('Request-Times') === '1';\n        let ret = res.body;\n        let isServer = 'rid' in obj;\n        this.doHttpResponse(ret, (data) => {\n          if (isNewConnect) {\n            if (!isServer) {\n              // 客户端处理历史记录\n              data && data.length && this.doHistory(data, obj);\n            }\n          } else {\n            // 渲染数据到聊天窗口\n            data && data.length && this.doPolling(data, obj, isServer);\n          }\n        });\n        // 获取到数据-直接轮询\n        this.isLogin && this.pollingStart(obj, random, domain);\n      });\n  }\n  // 图片预览\n  preview(file, callback) {\n    var reader = new FileReader();\n    reader.readAsDataURL(file);\n    reader.onload = (e) => {\n      callback(e.target.result);\n    };\n  }\n  // 上传文件\n  uploadFile(fileObj, callback, progressCallback?) {\n    const formData = new FormData();\n    formData.append('file', fileObj.file);\n    let api = 'https://io.imdraw.com:444';\n    const req = new HttpRequest('POST', api, formData, {\n      reportProgress: true,\n    });\n    this.http\n      .request(req)\n      .pipe(\n        catchError(\n          this.handleError('uploadFile', () => {\n            callback(fileObj, true);\n            this.showAlert('文件服务器故障!');\n          })\n        )\n      )\n      .subscribe((event) => {\n        if (event.type === HttpEventType.UploadProgress) {\n          fileObj.uploadProgress = Math.round(\n            (100 * event.loaded) / event.total\n          );\n          progressCallback && progressCallback(fileObj);\n        } else if (event instanceof HttpResponse) {\n          let body: any = event.body;\n          fileObj.src = api + '/' + body.key;\n          fileObj.type === 'file' && (fileObj.src += '?operation=download');\n          callback(fileObj);\n        }\n      });\n  }\n\n  /**\n   * // fid 接收者=我 右， 不是我 左\n   * @param data\n   * @param obj\n   * @param isServer\n   */\n  doPolling(data, obj, isServer?) {\n    \n    data.forEach((d) => {\n      let fid = d.fid;\n      let isISend = fid === obj.myID;\n      let type = d.type;\n      switch (type) {\n        // 普通消息\n        case 0:\n          this.doType0(isISend, obj, d, isServer);\n          break;\n        // 已读未读消息\n        case 1:\n          this.doType1(d, obj, isISend, isServer);\n          break;\n        // 上下线消息\n        case 3:\n          this.doType3(isISend, d, isServer, obj);\n          break;\n      }\n    });\n  }\n  // 处理已读未读消息\n  doType1(d, obj, isISend, isServer) {\n    // 已读未读消息\n    if (!isISend) {\n      if (isServer) {\n        // 服务端\n        // 发来的是自己吗-是的话就不用改变-不是就要判断\n        if (!isISend) {\n          // 判断发来的是当前用户吗\n          let isCuUserSend = obj.user.id === d.fid;\n          if (isCuUserSend) {\n            // 当前用户发来的设置已读\n            let i = obj.chatList.findIndex((x) => x.id === d.id);\n            i > -1 && (obj.chatList[i].readed = true);\n          }\n        }\n      } else {\n        // 客户端\n        let i = obj.chatList.findIndex((x) => x.id === d.id);\n        i > -1 && (obj.chatList[i].readed = true);\n      }\n    }\n  }\n  // 处理上下限消息\n  doType3(isISend, d, isServer, obj) {\n    isISend &&\n      this.showAlert(\n        '游客' + d.fid + (d.data === 'online' ? '上' : '离') + '线'\n      );\n    // 客服端 处理一下用户列表用户上下线显示\n    if (isServer) {\n      let i = obj.userList.findIndex((x) => x.id === d.fid);\n      i > -1 && (obj.userList[i].state = d.data === 'online');\n    }\n  }\n\n  doType0(isISend, obj, d, isServer) {\n    let fid = d.fid;\n    let isCuUserSend = isServer ? obj.user.id === fid : !isISend;\n    // 设置消息的左右显示\n    this.attachSPT(obj, d, isServer);\n    // 收到消息是窗口状态\n    if (this.isWindowActive) {\n      // 窗口激活\n      if (!isISend) {\n        // 当前用户发来的不是我发的消息发来一条读一条，跳底部\n        if ((isServer && isCuUserSend) || !isServer) {\n          \n          // 对方的消息-发来一条读一条\n          let readedMsg: any = { id: d.id, type: 1 };\n          isServer && (readedMsg.rid = obj.user.id);\n          this.sendMsg(readedMsg);\n          obj.chatList.push(d);\n          this.jumpToChatBottom(obj);\n        } else if (isServer && !isCuUserSend) {\n          // 不管用户在不在列表中消息数+1;在列表的用户不要获取用户信息，不在的要获取\n          let userIndex = obj.userList.findIndex((u) => u.id === fid);\n          let isInUserList = userIndex > -1;\n          if (isInUserList) {\n            let userInfo = obj.userList[userIndex];\n            this.notifyAndUnreadPlus(userInfo, d);\n          } else {\n            this.getUserInfo(fid, (userInfo) => {\n              this.notifyAndUnreadPlus(userInfo, d);\n              obj.userList.unshift(userInfo);\n            });\n          }\n        }\n      } else {\n        // 是我发的消息-融合消息信息\n        let i = obj.chatList.findIndex((x) => x.mark === d.mark);\n        i === -1 ? obj.chatList.push(d) : Object.assign(obj.chatList[i], d);\n      }\n    } else {\n      // 收到消息时窗口未激活\n      if (!isISend) {\n        // 当前用户发来的不是我发的消息未读+1，消息推入，跳底部\n        obj.chatList.push(d);\n        if ((isServer && isCuUserSend) || !isServer) {\n          \n          let userInfo = isServer ? obj.user : obj;\n          this.notifyAndUnreadPlus(userInfo, d);\n          this.jumpToChatBottom(obj);\n        } else if (isServer && !isCuUserSend) {\n          // 不管用户在不在列表中消息数+1;在列表的用户不要获取用户信息，不在的要获取\n          let userIndex = obj.userList.findIndex((u) => u.id === fid);\n          let isInUserList = userIndex > -1;\n          if (isInUserList) {\n            let userInfo = obj.userList[userIndex];\n            this.notifyAndUnreadPlus(userInfo, d);\n          } else {\n            this.getUserInfo(fid, (userInfo) => {\n              this.notifyAndUnreadPlus(userInfo, d);\n              obj.userList.unshift(userInfo);\n            });\n          }\n        }\n      } else {\n        // 是我发的消息-融合消息信息\n        let i = obj.chatList.findIndex((x) => x.mark === d.mark);\n        i === -1 ? obj.chatList.push(d) : Object.assign(obj.chatList[i], d);\n      }\n    }\n  }\n\n  notifyAndUnreadPlus(userInfo, d) {\n    userInfo.state = true;\n    let name = userInfo.name ? '用户' + userInfo.name : '游客' + d.fid;\n    this.deskNotify(name, d.data);\n    this.setUnreadPlus(userInfo, d);\n  }\n  setUnreadPlus(userInfo, msg) {\n    userInfo.unreadOption = userInfo.unreadOption || {\n      unread: 0,\n      chatID: '',\n      id: [],\n    };\n    userInfo.unreadOption.unread++;\n    !userInfo.unreadOption.chatID &&\n      (userInfo.unreadOption.chatID = 'chatList' + msg.id);\n    userInfo.unreadOption.id.push(msg.id);\n    this.updateUnreadStorage(userInfo.id, userInfo.unreadOption);\n  }\n\n  // 窗口激活的时候如果第一条未读消息id 在可视区域，依次发送已读消息，未读消息数清0\n  // 第一跳不在可视区域那么显示未读消息数\n  sendReadedMsg() {\n    \n    if (this.who) {\n      \n      let isServer = 'rid' in this.who;\n      let unreadParentObj: any = isServer ? this.who.user : this.who;\n      if (unreadParentObj) {\n        \n        let unreadOption = unreadParentObj.unreadOption;\n        \n        if (unreadOption && unreadOption.id && unreadOption.id.length) {\n          let id = unreadOption.id[0];\n          if (id) {\n            \n            this.inViewToSendReadMsg(\n              unreadParentObj,\n              this.who,\n              'chatList' + id\n            );\n          }\n        }\n      } else {\n        \n        setTimeout(() => {\n          this.sendReadedMsg();\n        }, 1000);\n      }\n    } else {\n      setTimeout(() => {\n        this.sendReadedMsg();\n      }, 1000);\n    }\n  }\n\n  // 设置我的消息为已读的\n  setMyInfoReaded(obj) {\n    let clen = obj.chatList.length;\n    \n    for (let i = obj.historyLen; i < clen; i++) {\n      let dd = obj.chatList[i];\n      if (dd.fid === obj.myID) {\n        // 我发送的都被当作已读的\n        dd.readed = true;\n      }\n    }\n    obj.historyLen = clen;\n  }\n  updateUnreadStorage(id, unreadOption) {\n    let storage: any = window.localStorage.unread;\n    try {\n      storage = (storage && JSON.parse(storage)) || {};\n    } catch (e) {\n      storage = {};\n    }\n    storage[id] = unreadOption;\n    window.localStorage.unread = JSON.stringify(storage);\n  }\n  // 处理历史消息\n  doHistory(data, obj) {\n    let isServer = 'rid' in obj;\n    // 顺次执行判断显示左右\n    this.attachSPTWidthArr(data, obj, isServer);\n    obj.chatList = data;\n\n    // 设置我未读unreadOption 和 对方已读\n    // 我未读- 对方发的信息-没有两个读者-不在可视区\n    // 对方的消息 => 从后读-遇到我的消息对方的消息就是已读的，如果还是对方的消息，那么看是否有两个读者-在不在可视区域\n    this.setReadInfo(data, obj, isServer);\n  }\n  // 设置消息已读和未读\n  setReadInfo(data, obj, isServer) {\n    let len = (obj.historyLen = data.length);\n    let unreadParentObj = isServer ? obj.user : obj;\n    unreadParentObj.unreadOption = { unread: 0, id: [] };\n    let rightMsgReaded = false;\n    let rightStopIndex = -1;\n    let leftMsgReaded = false;\n    for (let i = len; i--; ) {\n      let d = data[i];\n      let isDbReaders = d.readers.split(',').length > 1;\n      let isIsend = d.fid === obj.myID;\n      let isSysMsg = d.fid === 0;\n      // 客服端自己发的消息== 系统消息和自己发的消息\n      isServer && (isIsend = isSysMsg || isIsend);\n      if (isIsend) {\n        leftMsgReaded = true;\n        if (isDbReaders) {\n          // 有两读者，我发的消息都读了\n          rightMsgReaded = true;\n          // 停止判断\n          rightStopIndex = i;\n          break;\n        } else {\n          // 我的消息对方未读，读者只有一个\n          d.readed = rightMsgReaded;\n          // 判读下一个\n        }\n      } else {\n        // 我的消息它都读了-判断他的消息我读没读\n        rightMsgReaded = true;\n        rightStopIndex = i;\n\n        if (isDbReaders) {\n          // 有两读者\n          break;\n        } else {\n          // 对方这条消息我没读，看下一个\n          if (!leftMsgReaded) {\n            unreadParentObj.unreadOption.unread++;\n            unreadParentObj.unreadOption.id.push(d.id);\n          }\n          !unreadParentObj.unreadOption.chatID &&\n            (unreadParentObj.unreadOption.chatID = 'chatList' + d.id);\n        }\n      }\n    }\n    // 设置我的消息对方已读\n    if (rightMsgReaded && rightStopIndex > -1) {\n      for (let i = rightStopIndex + 1; i--; ) {\n        data[i].readed = true;\n      }\n    }\n    if(isServer){\n      this.updateUnreadStorage(obj.user.id,unreadParentObj.unreadOption)\n    }\n    \n    // 设置跳转到我未读的消息处\n    // this.jumpToUnread(obj);\n    // 历史跳转到底部\n    this.jumpToChatBottom(obj);\n  }\n  jumpToChatBottom(obj) {\n    setTimeout(() => {\n      obj.chatElem.scrollTop = obj.chatElem.scrollHeight;\n    }, 1000);\n  }\n  // 跳转到未读消息处\n  jumpToUnread(obj) {\n    let isServer = 'rid' in obj;\n    let unreadParentObj = isServer ? obj.user : obj;\n    if (unreadParentObj.unreadOption.unread) {\n      setTimeout(() => {\n        let a = document.getElementById('linkToChatID');\n        a && a.click();\n        setTimeout(() => {\n          this.inViewToSendReadMsg(unreadParentObj, obj);\n        }, 1500);\n      }, 1000);\n    }\n  }\n  inViewToSendReadMsg(unreadParentObj, obj, id?) {\n    let nowAt = document.getElementById(\n      id || unreadParentObj.unreadOption.chatID\n    );\n    if (nowAt) {\n      let f = nowAt.offsetTop;\n      let h = nowAt.offsetHeight;\n      let h1 = obj.chatElem.clientHeight;\n      let t = obj.chatElem.scrollTop;\n\n      \n      if (f > t && f + h < t + h1 && unreadParentObj.unreadOption.id.length) {\n        // 发送已读消息\n        unreadParentObj.unreadOption.id.forEach((el) => {\n          let msg: any = { id: el, type: 1 };\n          'rid' in obj && (msg.rid = obj.user.id);\n          this.sendMsg(msg);\n        });\n        // 清0消息\n        let clearUnread = { unread: 0, id: [], chatID: '' };\n        if ('rid' in obj) {\n          obj.user.unreadOption = clearUnread;\n          this.updateUnreadStorage(obj.user.id, clearUnread);\n        } else {\n          obj.unreadOption = clearUnread;\n        }\n      }\n    }\n  }\n  // 获取用户列表\n  getUserList(success) {\n    this.http\n      .get(this.api.userList)\n      .pipe(catchError(this.handleError('getUserList')))\n      .subscribe((res) => {\n        this.doHttpResponse(res, success);\n      });\n  }\n  getUserInfo(id, cb) {\n    this.http\n      .get(this.api.userInfo + id)\n      .pipe(catchError(this.handleError('getUserInfo')))\n      .subscribe((res: any) => {\n        this.doHttpResponse(res, cb);\n      });\n  }\n  login(data) {\n    this.http\n      .post(this.api.login, data)\n      .pipe(catchError(this.handleError('login')))\n      .subscribe((res) => {\n        this.doHttpResponse(res, () => {\n          this.showAlert('登录成功');\n          this.isLogin = true;\n          // 登录成功跳转客服页面\n          setTimeout(() => {\n            this.router.navigate(['/server']);\n          }, 2000);\n        });\n      });\n  }\n  register(data) {\n    this.http\n      .post(this.api.register, data)\n      .pipe(catchError(this.handleError('register')))\n      .subscribe((res) => {\n        this.doHttpResponse(res, () => {\n          this.showAlert('注册成功，马上跳转登录');\n          setTimeout(() => {\n            this.router.navigate(['/auth/login']);\n          }, 2000);\n        });\n      });\n  }\n\n  logout() {\n    this.http\n      .post(this.api.logout, null)\n      .pipe(catchError(this.handleError('logout')))\n      .subscribe((res) => {\n        this.doHttpResponse(res, () => {\n          this.showAlert('登出成功!');\n          setTimeout(() => {\n            this.router.navigate(['/auth/login']);\n          }, 2000);\n        });\n      });\n  }\n  getHistory(obj, id, success) {\n    let options: any = {\n      observe: 'response',\n    };\n    this.http\n      .get(this.api.history + (id ? '?id=' + id : ''), options)\n      .pipe(catchError(this.handleError('getHistory')))\n      .subscribe((res: any) => {\n        if (!obj.myID) {\n          obj.myID = Number(res.headers.get('Uid'));\n        }\n        let ret = res.body;\n        this.doHttpResponse(ret, (data) => {\n          this.doHistory(data, obj);\n          success(data);\n        });\n      });\n  }\n  // 记录上一个时间避免重复时间显示\n  tmpTime: string = '';\n  attachSPT(obj, d, isServer) {\n    let isIsend = d.fid === obj.myID;\n    let isSysMsg = d.fid === 0;\n    d.isServer = isSysMsg ? true : isServer ? isIsend : !isIsend;\n    d.position = isServer ? (isSysMsg ? false : !isIsend) : !isIsend;\n    let fromNowTime = this.timeFromNow(d.time / 1000000);\n    d.timeStr = this.tmpTime === fromNowTime ? '' : fromNowTime;\n    this.tmpTime !== fromNowTime && (this.tmpTime = fromNowTime);\n    d.timeFormat = this.formatTime(d.time / 1000000, 'YYYY-MM-DD hh:mm:ss');\n  }\n  attachSPTWidthArr(data, obj, isServer) {\n    data.forEach((d) => {\n      this.attachSPT(obj, d, isServer);\n    });\n  }\n\n  notifyInstanceEvent(content, title) {\n    var instance = new Notification(title, {\n      body: content,\n      icon: '/assets/images/desk-logo.png',\n      tag: '1212212',\n      // sound:'/assets/sounds/msg.wav',\n      renotify: true,\n    });\n    instance.onclick = function (e) {\n      window.focus();\n      instance.close();\n      // 设置 当前用户的信息读取发送信息读取\n    };\n    instance.onerror = function () {};\n    instance.onshow = function () {\n      try {\n        var msg = new Audio();\n        msg.src = '/assets/sounds/msg.wav';\n        msg.play();\n      } catch (e) {\n        \n      }\n    };\n    instance.onclose = function () {};\n  }\n  // 不兼容桌面通知时采用的延时计数器\n  timer: any;\n  deskNotify(title, msg) {\n    var Notification = window.Notification;\n    let div = document.createElement('div');\n    div.innerHTML = msg;\n    let content = '';\n    Array.from(div.childNodes).forEach((el: any) => {\n      let nodeType = el.nodeType;\n      if (nodeType === 1) {\n        // 元素节点\n        let id = el.id;\n        if (id.substring(0, 3) === 'img') {\n          content += '[图片]';\n        } else if (id.substring(0, 4) === 'file') {\n          content += '[文件]' + el.innerText;\n        } else {\n          content += el.innerText;\n        }\n      } else if (nodeType === 3) {\n        // 文本节点\n        content += el.textContent;\n      }\n    });\n    content = content.substring(0, 100) + (content.length > 100 ? '...' : '');\n\n    if (Notification) {\n      //支持桌面通知\n      if (Notification.permission == 'granted') {\n        //已经允许通知\n\n        this.notifyInstanceEvent(content, title);\n      } else {\n        //第一次询问或已经禁止通知(如果用户之前已经禁止显示通知，那么浏览器不会再次询问用户的意见，Notification.requestPermission()方法无效)\n        Notification.requestPermission(function (status) {\n          if (status === 'granted') {\n            this.notifyInstanceEvent(content, title);\n          } else {\n            //用户禁止\n            return false;\n          }\n        });\n      }\n    } else {\n      //不支持(IE等)\n      var index = 0;\n      clearInterval(this.timer);\n      this.timer = setInterval(function () {\n        let titleElem = document.getElementsByName('title')[0];\n        if (index % 2) {\n          titleElem.innerText = '【　　　】' + title; //这里是中文全角空格，其他不行\n        } else {\n          titleElem.innerText = '【新消息】' + title;\n        }\n        index++;\n\n        if (index > 20) {\n          clearInterval(this.timer);\n        }\n      }, 500);\n    }\n  }\n}\n","import { Pipe, PipeTransform } from '@angular/core';\nimport { DomSanitizer } from '@angular/platform-browser';\n\n@Pipe({\n  name: 'toSafe'\n})\nexport class ToSafePipe implements PipeTransform {\n  constructor(\n    private _sanitizer: DomSanitizer\n  ) { }\n  // args={url,html,style,resourceUrl}\n  transform(value: any, args?: any): any {\n    args = args || 'url';\n    return  this._sanitizer['bypassSecurityTrust'+ args[0].toUpperCase()+args.slice(1)](value);\n  }\n\n}\n","import { Component, OnInit } from '@angular/core';\n\n@Component({\n  selector: 'app-manage',\n  templateUrl: './manage.component.html',\n  styleUrls: ['./manage.component.css']\n})\nexport class ManageComponent implements OnInit {\n\n  constructor() { }\n  serverUrl :string = \"http://localhost:4200/server\";\n  tabIndex :number = 0;\n  ngOnInit(): void {\n  }\n  changeTab(e){\n    console.dir(e.target)\n    let i  = Number(e.target.dataset.index);\n    !isNaN(i) && ( this.tabIndex = i);\n  }\n\n}\n","<div class=\"container clearfix\">\n    <div class=\"title bg-base noselect\" ondragstart=\"return false\" id=\"nameTitle\">\n        <img src=\"assets/images/logo.png\" class=\"vm\">\n        <span>在线客服</span>\n        <p class='fr name'>\n            <span>管理员01</span>\n            <span class=\"iconfont icon-true online\"></span>\n            <span class=\"state-txt\">在线</span>\n        </p>\n    </div>\n    <!-- 内容区 -->\n    <div class=\"content clearfix\" id=\"contentBox\">\n\n        <!-- 左侧客户列表 -->\n        <div class=\"fl left ie-scroll other-scroll \">\n            <div class=\"menu\">\n                <span class=\"iconfont icon-menu\" id=\"menu\"></span>\n            </div>\n            <ul id=\"customers\" class=\"customers\" (click)=\"changeTab($event)\">\n                <li [class]=\"tabIndex===0?'active':''\" data-index=\"0\" >客户管理</li>\n                <li data-index=\"1\" [class]=\"tabIndex===1?'active':''\">客服管理</li>\n                <li data-index=\"2\" [class]=\"tabIndex===2?'active':''\">聊天窗口</li>\n            </ul>\n\n        </div>\n\n\n        <!-- 右侧-->\n        <div class=\"fr right pos-r\" id=\"history\">\n\n            <h2 class=\"\"><span class=\"vm\">消息记录</span> <i\n                    class=\"iconfont text-base icon-close vm-before fr mr-1  csr\" id=\"lisi\"></i></h2>\n            <div class=\"history-content ie-scroll other-scroll\" >\n                <!-- 昨天有聊天的时间 hh:mm:ss 显示每条记录的时间客户 -->\n                <!-- 客户 \n                <div class=\"dialog-r\">\n                    <p class=\"text-base\"><span>1345...4564</span> <span>12:34:12</span></p>\n                    <p class=\"ml-1\">聊天内容聊天内容聊天内容聊天内容聊天内容聊天内容聊天内容聊天内容聊天内容聊天内容</p>\n                </div>-->\n                <!-- 客服 \n                <div class=\"dialog-r\">\n                    <p class=\"online\"><span>客服001</span> <span>12:34:15</span></p>\n                    <p class=\"ml-1\">聊天内容聊天内容</p>\n                </div>-->\n\n\n<!-- \n\n\n\n\n\n                <div class=\"dialog-r\">\n                    <p class=\"text-base\"><span>1345...4564</span> <span>12:34:12</span></p>\n                    <p class=\"ml-1\">聊天内容聊天内容聊天内容聊天内容聊天内容聊天内容聊天内容聊天内容聊天内容聊天内容</p>\n                </div>\n                <div class=\"dialog-r\">\n                    <p class=\"text-base\"><span>1345...4564</span> <span>12:34:12</span></p>\n                    <p class=\"ml-1\">聊天内容聊天内容聊天内容聊天内容聊天内容聊天内容聊天内容聊天内容聊天内容聊天内容</p>\n                </div>\n                <div class=\"dialog-r\">\n                    <p class=\"text-base\"><span>1345...4564</span> <span>12:34:12</span></p>\n                    <p class=\"ml-1\">聊天内容聊天内容聊天内容聊天内容聊天内容聊天内容聊天内容聊天内容聊天内容聊天内容</p>\n                </div>\n                <div class=\"dialog-r\">\n                    <p class=\"text-base\"><span>1345...4564</span> <span>12:34:12</span></p>\n                    <p class=\"ml-1\">聊天内容聊天内容聊天内容聊天内容聊天内容聊天内容聊天内容聊天内容聊天内容聊天内容</p>\n                </div>\n                <div class=\"dialog-r\">\n                    <p class=\"text-base\"><span>1345...4564</span> <span>12:34:12</span></p>\n                    <p class=\"ml-1\">聊天内容聊天内容聊天内容聊天内容聊天内容聊天内容聊天内容聊天内容聊天内容聊天内容</p>\n                </div>\n                <div class=\"dialog-r\">\n                    <p class=\"text-base\"><span>1345...4564</span> <span>12:34:12</span></p>\n                    <p class=\"ml-1\">聊天内容聊天内容聊天内容聊天内容聊天内容聊天内容聊天内容聊天内容聊天内容聊天内容</p>\n                </div>\n                <div class=\"dialog-r\">\n                    <p class=\"text-base\"><span>1345...4564</span> <span>12:34:12</span></p>\n                    <p class=\"ml-1\">聊天内容聊天内容聊天内容聊天内容聊天内容聊天内容聊天内容聊天内容聊天内容聊天内容</p>\n                </div>\n                <div class=\"dialog-r\">\n                    <p class=\"text-base\"><span>1345...4564</span> <span>12:34:12</span></p>\n                    <p class=\"ml-1\">聊天内容聊天内容聊天内容聊天内容聊天内容聊天内容聊天内容聊天内容聊天内容聊天内容</p>\n                </div>\n                <div class=\"dialog-r\">\n                    <p class=\"text-base\"><span>1345...4564</span> <span>12:34:12</span></p>\n                    <p class=\"ml-1\">聊天内容聊天内容聊天内容聊天内容聊天内容聊天内容聊天内容聊天内容聊天内容聊天内容</p>\n                </div> -->\n\n\n\n\n            </div>\n            <!-- 日历 -->\n            <div  >\n                <!-- 接入css -->\n                <div class=\"d-none pos-a calendar\" id=\"calendar\">\n                    <div id='schedule-box' class=\"boxshaw\">\n                    </div>\n                    <div>\n\n                    </div>\n                </div>\n                <div class=\"fixed-calendar boxshaw \" id=\"rili\">\n                    <span class=\"ml-1 csr\">\n                        <i class=\"iconfont icon-calendar text-base vm\" id=\"kanRili\"></i>\n                        <span id='riliTxt' class=\"vm\">2012-5-1</span>\n                    </span>\n\n                    <span class=\"history-op fr mr-1\">\n                        <i class=\"iconfont icon-left-stop bold\" title=\"第一页\"></i>\n                        <i class=\"iconfont icon-less-than\" title=\"上一页\"></i>\n                        <i class=\"iconfont icon-great-than\" title=\"下一页\"></i>\n                        <i class=\"iconfont icon-right-stop bold\" title=\"最后一页\"></i>\n                    </span>\n                </div>\n\n            </div>\n\n        </div>\n\n        <!-- 中/右侧聊天框 -->\n        <div class=\"center\" id=\"center\">\n            <!-- 客户管理 -->\n            <div class=\"customer-list ie-scroll other-scroll\" [class]=\"tabIndex===0?'':'d-none'\">\n                <table>\n                    <thead>\n                        <tr>\n                            <th class=\"th-tag\"></th>\n                            <th>访客姓名</th>\n                            <th>访问次数</th>\n                            <th>地区</th>\n                            <th class=\"d-sm-none\">停留时间</th>\n                            <th class=\"d-sm-none\">最后活动</th>\n                            <th>IP地址</th>\n                            <th>当前接待</th>\n                            <th>操作</th>\n                        </tr>\n                    </thead>\n                    <tbody id=\"tbContent\">\n                        <tr>\n                            <td class=\"th-tag\"><span class=\"icon new\">新</span></td>\n                            <td>秦某某</td>\n                            <td>03</td>\n                            <td>河北省</td>\n                            <td class=\"d-sm-none\">00:00:37</td>\n                            <td class=\"d-sm-none\">00:00:37</td>\n                            <td>127.0.0.1</td>\n                            <td>客服01</td>\n                            <td class=\"pos-r\">\n                                <i class=\"iconfont icon-search\"></i>\n                                <ul class=\"pos-a search-menu\">\n                                    <li class=\"active\">聊天记录</li>\n                                    <li>历史轨迹</li>\n                                </ul>\n                            </td>\n                        </tr>\n\n                        <tr>\n                            <td class=\"th-tag\"><span class=\"icon new\">新</span></td>\n                            <td>秦某某</td>\n                            <td>03</td>\n                            <td>河北省</td>\n                            <td class=\"d-sm-none\">00:00:37</td>\n                            <td class=\"d-sm-none\">00:00:37</td>\n                            <td>127.0.0.1</td>\n                            <td>客服01</td>\n                            <td>\n                                <i class=\"iconfont icon-search\"></i>\n\n                            </td>\n                        </tr>\n                    </tbody>\n                </table>\n\n                <!-- 页码 -->\n                <ul id=\"pagenation\" class=\"page\"></ul>\n            </div>\n\n            <!-- 客服管理 -->\n            <div class=\"customer-list server-manage ie-scrollother-scroll\" [class]=\"tabIndex===1?'':'d-none'\">\n                <h3>所有客服</h3>\n                <ul>\n                    \n                    <li >\n                        <div class=\"name-online\">\n                            <div class=\"d-inline-block\">\n                                <span class=\"icon-container d-inline-block\"><i class=\"iconfont icon-server\"></i></span>\n                                <span>客服001</span>\n                            </div>\n                            <div class=\"online-info fr \">\n                                <span class=\"circle\"></span>\n                                <span>在线</span>\n                            </div>\n                           \n                        </div>\n\n                        <div>\n                            <div class=\"dialog-info d-inline-block\">\n                                <div class=\"text-right\">\n                                    <span class=\"fl mr-1\">当前对话</span>\n                                    <span class=\"dialog-txt\">4</span>\n                                </div>\n                                <div class=\"text-right\">\n                                    <span class=\"fl mr-1\">今日对话</span>\n                                    <span class=\"dialog-txt\">15</span>\n                                </div>\n                            </div>\n                             \n                                <button class=\"fr btn-dialog\" data-id=\"1\">对话记录</button>\n                           \n                        </div>\n                    </li>\n\n                    <li >\n                        <div class=\"name-online\">\n                            <div class=\"d-inline-block\">\n                                <span class=\"icon-container d-inline-block\"><i class=\"iconfont icon-server\"></i></span>\n                                <span>客服001</span>\n                            </div>\n                            <div class=\"online-info fr \">\n                                <span class=\"circle\"></span>\n                                <span>在线</span>\n                            </div>\n                           \n                        </div>\n\n                        <div>\n                            <div class=\"dialog-info d-inline-block\">\n                                <div class=\"text-right\">\n                                    <span class=\"fl mr-1\">当前对话</span>\n                                    <span class=\"dialog-txt\">4</span>\n                                </div>\n                                <div class=\"text-right\">\n                                    <span class=\"fl mr-1\">今日对话</span>\n                                    <span class=\"dialog-txt\">15</span>\n                                </div>\n                            </div>\n                             \n                                <button class=\"fr btn-dialog\"  data-id=\"2\">对话记录</button>\n                           \n                        </div>\n                    </li>\n\n                    <li >\n                        <div class=\"name-online\">\n                            <div class=\"d-inline-block\">\n                                <span class=\"icon-container d-inline-block\"><i class=\"iconfont icon-server\"></i></span>\n                                <span>客服001</span>\n                            </div>\n                            <div class=\"online-info fr \">\n                                <span class=\"circle\"></span>\n                                <span>在线</span>\n                            </div>\n                           \n                        </div>\n\n                        <div>\n                            <div class=\"dialog-info d-inline-block\">\n                                <div class=\"text-right\">\n                                    <span class=\"fl mr-1\">当前对话</span>\n                                    <span class=\"dialog-txt\">4</span>\n                                </div>\n                                <div class=\"text-right\">\n                                    <span class=\"fl mr-1\">今日对话</span>\n                                    <span class=\"dialog-txt\">15</span>\n                                </div>\n                            </div>\n                             \n                                <button class=\"fr btn-dialog\"  data-id=\"3\">对话记录</button>\n                           \n                        </div>\n                    </li>\n                </ul>\n                \n                 \n            </div>\n            <div class=\"customer-list ie-scroll other-scroll  \" [class]=\"tabIndex===2?'':'d-none'\">\n                <iframe  frameborder=0 style=\"width:100%;height:100%\"  src=\"http://localhost:4200/server\"></iframe>\n            </div>\n\n        </div>\n\n    </div>\n\n</div>\n\n\n<div class=\"alert d-none\" id=\"alert\">错误提示</div>","import { Component, OnInit } from '@angular/core';\nimport { ActivatedRoute, Params } from '@angular/router';\nimport { ComService } from '../core/com.service';\nimport * as Canlendar from '../../assets/js/calendar';\n\n@Component({\n  selector: 'app-server',\n  templateUrl: './server.component.html',\n  styleUrls: ['./server.component.css'],\n})\nexport class ServerComponent implements OnInit {\n  chatList: any = [];\n  ws: any;\n  rid: any = 0;\n  // 当前用户\n  user: any;\n  // 用户列表\n  userList = [];\n  // 我的id\n  myID: number;\n  rightShow: string = '';\n  chatElem: any;\n  stateMenuShow: boolean = false;\n  allHistory: any = [];\n  rightHistory: any[] = [];\n  // 文件列表\n  files: any = [];\n  // 当前添加的文件/图片\n  // 是否显示用户列表\n  isShowUserList: boolean = false;\n  // 历史记录日历显示\n  historyDate: string = '';\n  // 是否显示月日历\n  isShowMonthCalendar: boolean = false;\n  historyLen :number = 0;\n  constructor(private com: ComService, private route: ActivatedRoute) {}\n\n  ngOnInit(): void {\n    this.historyDate = this.com.formatTime('', 'YYYY-MM-DD');\n    this.initCalendar();\n    this.chatElem = document.getElementById('chat');\n    this.com.getUserList((data) => {\n      console.log('com.getUserList data: ', data);\n      if (data && data.length) {\n        // 设置未读数量\n        let storage = window.localStorage.unread;\n        try{\n          storage = JSON.parse(storage) || {};\n        }catch(e){\n          storage = {}\n        }\n        data.forEach((d) => {\n          // 5s不回应默认已掉线\n          storage[d.id] && (d.unreadOption = storage[d.id])\n          d.state = Date.now() - d.note_at / 1000000 < 5000;\n        });\n        this.userList = data;\n        this.changeUser(0);        \n      }\n    });\n    // 开启轮询\n    let random = Date.now().toString();\n    this.com.pollingStart(this, random, 'role=1');\n  }\n  clickImg(e) {\n    if (e.target.tagName.toLowerCase() === 'img') {\n      this.com.previewOption.isShowMask = true;\n      this.com.previewOption.src = e.target.src;\n    }\n  }\n  initCalendar() {\n    let callback = (y, m, d) => {\n      this.historyDate = this.com.formatTime(\n        y + '-' + m + '-' + d,\n        'YYYY-MM-DD'\n      );\n    };\n    new Canlendar({\n      el: '#schedule-box',\n      clickCb: callback,\n      nextMonthCb: callback,\n      nextYeayCb: callback,\n      prevMonthCb: callback,\n      prevYearCb: callback,\n    });\n  }\n  keepEnd: boolean = false;\n  fileEmiter(e) {\n    this.keepEnd = !this.keepEnd;\n  }\n  // 历史记录按日期分离\n  getSpecialHistory(date) {\n    if (this.allHistory.length) {\n      this.rightHistory = this.allHistory.filter((el) => {\n        return el.timeFormat.indexOf(date) > -1;\n      });\n      this.isShowMonthCalendar = false;\n    }\n  }\n  showUserList() {\n    this.isShowUserList = !this.isShowUserList;\n  }\n  // 左侧切换用户\n  changeUser(i) {\n    this.user = this.userList[i];   \n    // 清除未读\n   /* let unread = window.localStorage.unread;\n    try{\n      unread = JSON.parse(unread) || {};\n      unread[this.user.id] = {unread:0,id:[],chatID:''}\n      window.localStorage.unread = JSON.stringify(unread);\n    }catch(e){\n      unread = {}\n    }*/\n    \n    this.getHistory();\n  }\n  getHistory() {\n    this.com.getHistory(this, this.user.id, (data) => {\n      // this.chatList = data || [];\n      if (this.rightShow) {\n        this.rightHistory = data;\n        this.allHistory = data;\n      }\n    });\n  }\n  logout() {\n    // 登出\n    this.com.logout();\n    this.com.isLogin = false;\n  }\n\n  catchTab(e, callback) {\n    callback && callback();\n    e.stopPropagation();\n  }\n  showStateMenu() {\n    this.stateMenuShow = true;\n  }\n  hideShowing() {\n    this.stateMenuShow = false;\n    this.isShowUserList = false;\n    this.isShowMonthCalendar = false;\n  }\n  imgSrc: string = '';\n\n  rightHitoryShow(toggle) {\n    if (!toggle) {\n      this.com.getHistory(this, this.user.id, (data) => {\n        // 显示右侧信息\n        this.rightShow = 'right-show';\n        this.rightHistory = data;\n        this.allHistory = data;\n      });\n    } else {\n      this.closeHistory();\n    }\n  }\n  closeHistory() {\n    this.rightHistory = [];\n    this.rightShow = '';\n  }\n  showMonthCalendar() {\n    this.isShowMonthCalendar = !this.isShowMonthCalendar;\n  }\n  chooseDateConfirm() {\n    this.getSpecialHistory(this.historyDate);\n  }\n}\n","<div class=\"container clearfix\" >\n  <div class=\"title bg-base noselect pos-r\" ondragstart=\"return false\" id=\"nameTitle\">\n    <img src=\"assets/images/logo.png\" class=\"vm\">\n    <span>在线客服</span>\n    <div class='fr name  '>\n      <span class=\"mr-1\">客服{{myID}}</span>\n      <div class=\"d-inline-block\" (click)=\"showStateMenu();\">\n        <span class=\"iconfont icon-true online\"></span>\n        <span class=\"state-txt\">在线</span>\n        <i class=\"iconfont icon-dropdown\"></i>\n      </div>\n      <ul class=\"state-menu pos-a\" [class]=\"stateMenuShow?'show':''\">\n        <li class=\"active\">在线</li>\n        <li (click)=\"logout();\">登出</li>\n      </ul>\n    </div>\n\n  </div>\n  <!-- 内容区 -->\n  <div class=\"content clearfix\" [class]=\"rightShow\">\n\n    <!-- 左侧客户列表 -->\n    <div class=\"fl left ie-scroll other-scroll text-center \" [class]=\"isShowUserList?'pos-r':''\" >\n      <div class=\"menu \" (click)=\"showUserList();\">\n        <span class=\"iconfont icon-menu\" id=\"menu\"></span>\n      </div>\n      <div id=\"customers\" class=\"customers w-100 h-100 ie-scroll other-scroll \" [class]=\"isShowUserList?'show-list':''\">\n        <table class=\"user-list\" >\n          <tr [class]=\"user.id===u.id?'active':''\" *ngFor=\"let u of userList ;let i = index\" (click)=\"changeUser(i);\">\n            <td><span class=\"icon\" [class]=\"u.state?'new':'old'\" [title]=\"(u.state?'在':'离')+'线'\">{{u.state?'在':'离'}}</span></td>\n            <td>{{u.name||'游客'+u.id}}</td>\n            <td class=\"pos-r\">{{u.mall||'未知来源'}}<span *ngIf=\"u.unreadOption?.unread\" class=\"unread-label pos-a\">{{u.unreadOption?.unread}}</span></td>\n          </tr>\n          <!-- <tr>\n                        <td><span class=\"icon new\">新</span></td>\n                        <td>15176367173</td>\n                        <td>广西桂林</td>\n                    </tr> -->\n          <tr *ngIf=\"!userList.length\">\n            <td colspan=\"3\">没有客户访问</td>\n          </tr>\n        </table>\n      </div>\n\n    </div>\n\n\n    <!-- -->\n    <div class=\"fr right\" id=\"history\">\n\n      <h2 class=\"\">\n        <span class=\"vm\">消息记录</span>\n        <i class=\"iconfont text-base icon-close vm-before fr mr-1  csr\" id=\"lisi\" (click)=\"closeHistory()\"></i>\n      </h2>\n      <div class=\"history-content ie-scroll other-scroll\">\n        <!-- 昨天有聊天的时间 hh:mm:ss 显示每条记录的时间客户 -->\n        <!-- 客户 -->\n        <div class=\"dialog-r\" *ngFor=\"let h of rightHistory\" (click)=\"clickImg($event)\">\n          <p [class]=\"h.isServer?'online':'text-base' \">\n            <span>{{h.isServer?'客服'+h.fid:h.name||'游客'+h.fid}}</span>\n            <span class=\"ml-1\">{{h.timeFormat}}</span>\n          </p>\n          <p class=\"ml-1\" [innerHTML]=\"h.data\"> </p>\n        </div>\n        <div class=\"dialog-r\" *ngIf=\"!rightHistory.length\">没有历史记录</div>\n        <!-- 客服 \n        <div class=\"dialog-r\">\n          <p class=\"online\"><span>客服001</span> <span>12:34:15</span></p>\n          <p class=\"ml-1\">聊天内容聊天内容</p>\n        </div>\n\n\n\n\n\n\n\n\n        <div class=\"dialog-r\">\n          <p class=\"text-base\"><span>1345...4564</span> <span>12:34:12</span></p>\n          <p class=\"ml-1\">聊天内容聊天内容聊天内容聊天内容聊天内容聊天内容聊天内容聊天内容聊天内容聊天内容</p>\n        </div>\n        <div class=\"dialog-r\">\n          <p class=\"text-base\"><span>1345...4564</span> <span>12:34:12</span></p>\n          <p class=\"ml-1\">聊天内容聊天内容聊天内容聊天内容聊天内容聊天内容聊天内容聊天内容聊天内容聊天内容</p>\n        </div>\n        <div class=\"dialog-r\">\n          <p class=\"text-base\"><span>1345...4564</span> <span>12:34:12</span></p>\n          <p class=\"ml-1\">聊天内容聊天内容聊天内容聊天内容聊天内容聊天内容聊天内容聊天内容聊天内容聊天内容</p>\n        </div>\n        <div class=\"dialog-r\">\n          <p class=\"text-base\"><span>1345...4564</span> <span>12:34:12</span></p>\n          <p class=\"ml-1\">聊天内容聊天内容聊天内容聊天内容聊天内容聊天内容聊天内容聊天内容聊天内容聊天内容</p>\n        </div>\n        <div class=\"dialog-r\">\n          <p class=\"text-base\"><span>1345...4564</span> <span>12:34:12</span></p>\n          <p class=\"ml-1\">聊天内容聊天内容聊天内容聊天内容聊天内容聊天内容聊天内容聊天内容聊天内容聊天内容</p>\n        </div>\n        <div class=\"dialog-r\">\n          <p class=\"text-base\"><span>1345...4564</span> <span>12:34:12</span></p>\n          <p class=\"ml-1\">聊天内容聊天内容聊天内容聊天内容聊天内容聊天内容聊天内容聊天内容聊天内容聊天内容</p>\n        </div>\n        <div class=\"dialog-r\">\n          <p class=\"text-base\"><span>1345...4564</span> <span>12:34:12</span></p>\n          <p class=\"ml-1\">聊天内容聊天内容聊天内容聊天内容聊天内容聊天内容聊天内容聊天内容聊天内容聊天内容</p>\n        </div>\n        <div class=\"dialog-r\">\n          <p class=\"text-base\"><span>1345...4564</span> <span>12:34:12</span></p>\n          <p class=\"ml-1\">聊天内容聊天内容聊天内容聊天内容聊天内容聊天内容聊天内容聊天内容聊天内容聊天内容</p>\n        </div>\n        <div class=\"dialog-r\">\n          <p class=\"text-base\"><span>1345...4564</span> <span>12:34:12</span></p>\n          <p class=\"ml-1\">聊天内容聊天内容聊天内容聊天内容聊天内容聊天内容聊天内容聊天内容聊天内容聊天内容</p>\n        </div>\n\n\n-->\n\n      </div>\n      <!-- 日历 -->\n      <div class=\"pos-r\">\n        <!-- 接入css -->\n        <div class=\" pos-a calendar\" [class]=\"isShowMonthCalendar?'':'d-none'\">\n          <div id='schedule-box' class=\"boxshaw\">\n          </div>\n          <div>\n\n          </div>\n        </div>\n        <div class=\"fixed-calendar boxshaw \" id=\"rili\">\n          <span class=\"ml-1 csr\" (click)=\"showMonthCalendar();\">\n            <i class=\"iconfont icon-calendar text-base vm\" id=\"kanRili\"></i>\n            <span id='riliTxt' class=\"vm\">{{historyDate}}</span>\n          </span>\n\n          <!-- <span class=\"history-op fr mr-1\" *ngIf=\"!isShowMonthCalendar\">\n            <i class=\"iconfont icon-left-stop bold\" title=\"上个月\"></i>\n            <i class=\"iconfont icon-less-than\" title=\"前一天\"></i>\n            <i class=\"iconfont icon-great-than\" title=\"下一天\"></i>\n            <i class=\"iconfont icon-right-stop bold\" title=\"下个月\"></i>\n          </span> -->\n          <button *ngIf=\"isShowMonthCalendar\" class=\"confirm-btn fr\" (click)=\" getSpecialHistory( historyDate); \"> 确定\n          </button>\n        </div>\n\n      </div>\n\n    </div>\n\n    <!-- 中/右侧聊天框 -->\n    <div class=\"center pos-r\" id=\"center\">\n      <div class=\"user-info pos-a\" *ngIf=\"user\">\n        <!-- <div id=\"user\"><i class=\"ml-1 iconfont icon-user text-lighter-base vm\" id=\"userIcon\"></i> <span\n            id=\"userName\">&nbsp;{{user.name|| '游客'+user.id}}</span></div>\n        <div class=' '>\n          <div>\n            <span><b>{{user.email}}</b></span>\n            <span><b>{{user.ip}}</b></span>\n            <span>访问页面：<b>{{user.domain}}</b></span>\n            <span>来源:<b class=\"mr-1\" [title]=\"user.domain\">{{user.mall}}</b></span>\n          </div>\n        </div> \n\n        <table class=\"w-100\">\n          <tr>\n            <td>\n              <i class=\"ml-1 iconfont icon-user text-lighter-base vm\" id=\"userIcon\"></i>\n              <span id=\"userName\">&nbsp;{{user.name|| '游客'+user.id}}</span>\n            </td>\n            <td *ngIf=\"user.email\">\n              <span><b>{{user.email}}</b></span>\n            </td>\n            <td *ngIf=\"user.ip\" class=\"d-480-none\">\n              <span><b>{{user.ip}}</b></span>\n            </td>\n            <td *ngIf=\"user.domain\" class=\"d-768-none\">\n              <span>访问页面：<b>{{user.domain}}</b></span>\n            </td>\n            <td *ngIf=\"user.mall\">\n              <span>来源:<b class=\"mr-1\" [title]=\"user.domain\">{{user.mall}}</b></span>\n            </td>\n          </tr>\n        </table>-->\n\n        <ul class=\"box\">\n          <li class=\"item\">\n            <i class=\"ml-1 iconfont icon-user text-lighter-base vm\" id=\"userIcon\"></i>\n            <span id=\"userName\">&nbsp;{{user.name|| '游客'+user.id}}</span>\n          </li>\n          <li *ngIf=\"user.email\" class=\"item\">\n            <span><b>{{user.email}}</b></span>\n          </li>\n          <li *ngIf=\"user.ip\" class=\"d-480-none item\">\n            <span><b>{{user.ip}}</b></span>\n          </li>\n          <li *ngIf=\"user.domain\" class=\"d-768-none item\">\n            <span>访问页面：<b>{{user.domain}}</b></span>\n          </li>\n          <li *ngIf=\"user.mall\" class=\"item\">\n            <span>来源:<b class=\"mr-1\" [title]=\"user.domain\">{{user.mall}}</b></span>\n          </li>\n        </ul>\n      </div>\n      <div class=\"chat pos-r ie-scroll other-scroll\" id='chat'>\n\n        <div class=\"chat-details\" [style]=\"{'margin-top':(user?42:0)+'px'}\">\n\n          <chat-content [chatList]=\"chatList\"></chat-content>\n          <chat-unread [who]=\"this\" [unread]=\"user?.unread\"></chat-unread>\n          <a [href]=\"'/server#'+user?.unreadOption?.chatID\"   *ngIf=\"user?.unreadOption?.chatID\"  id=\"linkToChatID\">占位</a>\n          <!-- 客户 \n                    <p class=\"dialog\">\n                        <span class=\"iconfont icon-user text-lighter-base vb-before mr-1\"></span>\n                        <span class=\"chat-content  bg-light-base tleft pos-r\">\n                            <span class=\"chat-content-txt text-left client-content \">我为什么购买不成功</span>\n                        </span>\n                    </p>-->\n\n          <!-- 客服 \n                    <p class=\"dialog text-right\">\n\n                        <span class=\"chat-content  bg-light-base tright pos-r mr-1 text-left\">\n                            <span>请问您现在停留在哪个页面，是在订单确认还是银联付款页面?请问您现在停留在哪个页面，是在订单确认还是银联付款页面</span>\n                        </span>\n                        <span class=\"iconfont icon-kefu text-lighter-base vb-before \"></span>\n                    </p>\n                    <p class=\"dialog text-right\">\n\n                        <span class=\"chat-content  bg-light-base tright pos-r mr-1 text-left\">\n                            <span>请问您现在停留在哪个页面，是在订单确认还是银联付款页面?请问您现在停留在哪个页面，是在订单确认还是银联付款页面</span>\n                        </span>\n                        <span class=\"iconfont icon-kefu text-lighter-base vb-before \"></span>\n                    </p>\n                    <p class=\"dialog text-right\">\n\n                        <span class=\"chat-content  bg-light-base tright pos-r mr-1 text-left\">\n                            <span>请问您现在停留在哪个页面，是在订单确认还是银联付款页面?请问您现在停留在哪个页面，是在订单确认还是银联付款页面</span>\n                        </span>\n                        <span class=\"iconfont icon-kefu text-lighter-base vb-before \"></span>\n                    </p>\n                    <p class=\"dialog text-right\">\n\n                        <span class=\"chat-content  bg-light-base tright pos-r mr-1 text-left\">\n                            <span>请问您现在停留在哪个页面，是在订单确认还是银联付款页面?请问您现在停留在哪个页面，是在订单确认还是银联付款页面</span>\n                        </span>\n                        <span class=\"iconfont icon-kefu text-lighter-base vb-before \"></span>\n                    </p>-->\n        </div>\n      </div>\n      <div class=\"edit-area\" id=\"edit\">\n        <edit-operate [who]=\"this\" (historyEmiter)=\"rightHitoryShow($event);\"  (fileEmiter)=\"fileEmiter($event)\"  [toggle]=\"!!rightShow\"></edit-operate>\n        <send-area [who]=\"this\" [keepEnd]=\"keepEnd\"></send-area>\n      </div>\n\n\n\n    </div>\n\n  </div>\n\n</div>\n\n<div class=\"alert d-none\" id=\"alert\">错误提示</div>\n","import { Component, Input, OnInit, SimpleChanges } from '@angular/core';\nimport { ComService } from 'src/app/core/com.service';\n \n@Component({\n  selector: 'chat-content',\n  templateUrl: './chat-content.component.html',\n  styleUrls: ['./chat-content.component.css']\n})\n\nexport class ChatContentComponent implements OnInit {\n  @Input() chatList;\n  constructor(\n    private com:ComService\n  ) { }\n\n  ngOnInit(): void {\n  }\n  \n  clickImg(e){\n    if(e.target.tagName.toLowerCase()==='img'){\n      // 图片点击要放大图片\n      this.com.previewOption.src = e.target.src;\n      this.com.previewOption.isShowMask = true;\n    }\n  }\n}\n","<div *ngFor=\"let c of chatList\" [id]=\"'chatList'+c.id\">\n  <!-- 时间 -->\n  <p class=\"time\" *ngIf=\"c.timeStr\">{{c.timeStr}}</p>\n  <p class=\"dialog\" [class]=\"c.position?'':'text-right'\">\n    <!-- 自己发送的发送失败显示发送失败 -->\n    <span class=\"uploaded error mr-10\" title=\"发送失败!\" *ngIf=\"!c.position && c.isUploaded===-1\"><span class=\"iconfont icon-error\"></span></span>\n     <!-- 左侧发过来的信息显示发送成功，已读未读   -->\n    <span class=\"uploaded success mr-10\"  [title]=\"c.readed?'对方已读':'对方未读'\" *ngIf=\"!c.position && c.isUploaded!==-1\"><span class=\"read-circle\" [class]=\"c.readed?'readed':'unread'\"></span></span>\n    <!-- 左边头像 *ngIf=\"c.isUploaded===-1\"-->\n    <span class=\"iconfont text-lighter-base vb-before mr-1\" [class]=\"c.isServer?'icon-server':'icon-user'\"\n      *ngIf=\"c.position\"></span>\n    <span class=\"chat-content  bg-light-base  pos-r\" [class]=\"c.position?'tleft':'tright  mr-1 text-left'\">\n      <!-- 图片或文件显示 -->\n      <span [class]=\"c.position?'chat-content-txt text-left client-content':'' \" *ngIf=\"c.type\">\n        <img [src]=\"c.webSrc || c.src\" *ngIf=\"c.msgType==='img'\" />\n        <i class=\"iconfont \" [class]=\"'icon-'+c.fileType\" *ngIf=\"c.msgType==='file'\"></i>\n        <a class=\"file-name\" [href]=\"c.webSrc||'javascript:;'\" *ngIf=\"c.msgType==='file'\">{{c.name}}</a>\n        <span *ngIf=\"c.uploadProgress > 0 && c.uploadProgress < 100\">\n          上传中：{{c.uploadProgress}}%\n        </span>        \n      </span>\n      <!-- 纯文本|data是html -->\n      <span class=\"chat-content-txt text-left client-content \" *ngIf=\"!c.msgType\"\n        [innerHTML]=\"c.data | toSafe:'html'\" (click)=\"clickImg($event)\"></span>\n      \n    </span>\n   \n    <!-- 右边头像 -->\n    <span class=\"iconfont text-lighter-base vb-before \" *ngIf=\"!c.position\"\n      [class]=\"c.isServer?'icon-server':'icon-user'\"></span>\n  </p>\n\n</div>\n\n","import { Component, Input, OnInit, SimpleChanges } from '@angular/core';\nimport { ComService } from 'src/app/core/com.service';\n\n@Component({\n  selector: 'chat-unread',\n  templateUrl: './chat-unread.component.html',\n  styleUrls: ['./chat-unread.component.css']\n})\nexport class ChatUnreadComponent implements OnInit {\n\n  constructor(\n    private com:ComService\n  ) { }\n  @Input() who :any;\n  @Input() unread:number;\n  ngOnInit(): void {\n  }\n  toUnread(){\n    this.com.jumpToUnread(this.who)\n    // this.who.toBottom();\n  }\n}\n","<div class=\"chat-unread pos-a\" (click)=\"toUnread()\" *ngIf=\"unread\">未读{{unread}}</div>","import { Component, EventEmitter, Output, Input, OnInit } from '@angular/core';\nimport { ComService } from 'src/app/core/com.service';\n\n@Component({\n  selector: 'edit-operate',\n  templateUrl: './edit-operate.component.html',\n  styleUrls: ['./edit-operate.component.css'],\n})\nexport class EditOperateComponent implements OnInit {\n  constructor(private com: ComService) {}\n  @Output() fileEmiter = new EventEmitter();\n  @Output() historyEmiter = new EventEmitter();\n  isServer: boolean = false;\n  @Input() who: any;\n  @Input() toggle: boolean = false;\n  isLogin: boolean = false;\n\n  ngOnInit(): void {\n    this.isServer = 'rid' in this.who;\n  }\n\n  getFile(e) {\n    \n    //  允许的文件类型\n    // .doc application/msword\n    // .docx application/vnd.openxmlformats-officedocument.wordprocessingml.document\n    // .xls application/vnd.ms-excel\n    // .xlsx  application/vnd.openxmlformats-officedocument.spreadsheetml.sheet\n    // .ppt application/vnd.ms-powerpoint\n    // .pptx application/vnd.openxmlformats-officedocument.presentationml.presentation\n    // .pdf application/pdf\n    // .zip application/zip, application/octet-stream, application/x-zip-compressed, multipart/x-zip\n    // .rar application/x-rar-compressed, application/octet-stream\n    // .gz application/x-gzip\n    // .txt 'text/plain'\n    let permitType = [\n      'application/zip',\n      'application/octet-stream',\n      'application/x-zip-compressed',\n      'multipart/x-zip',\n      'application/x-rar-compressed',\n      'application/x-gzip',\n      'application/msword',\n      'application/vnd.openxmlformats-officedocument.wordprocessingml.document',\n      'application/vnd.ms-excel',\n      'application/vnd.openxmlformats-officedocument.spreadsheetml.sheet',\n      'application/vnd.ms-powerpoint',\n      'application/vnd.openxmlformats-officedocument.presentationml.presentation',\n      'application/pdf',\n      'text/plain',\n    ];\n   \n    let file = e.target.files[0];\n    if (file.type.indexOf('image') > -1) {\n      // 是图片\n      this.com.preview(file, (src) => {\n        let obj = { type: 'img', fid: 'img' + Date.now(), src, file };\n        this.who.files.push(obj);    \n        console.log('图片入栈： ', this.who.files); \n        this.fileEmiter.emit(true);   \n      });\n     \n    } else if (permitType.indexOf(file.type) > -1) {\n      // 是文件\n      let i = permitType.indexOf(file.type);\n      \n      let type =\n        i < 5\n          ? 'zip'\n          : i < 8\n          ? 'doc'\n          : i < 10\n          ? 'xls'\n          : i < 12\n          ? 'ppt'\n          : i === 12\n          ? 'pdf'\n          : 'txt';\n      let obj = {\n        type: 'file',\n        fileType: type,\n        file,\n        name: file.name,\n        fid: 'file' + Date.now(),\n      };\n      this.who.files.push(obj);\n      console.log('文件入栈： ', this.who.files);\n      \n       this.fileEmiter.emit(true);\n    } else {\n      this.com.showAlert('不支持此图片/文件格式');\n    }\n    e.target.value = '';\n  }\n\n  getHistory() {\n    // 显示右侧 然后把历史记录放到右侧去\n    if (this.isServer && !this.who.userList.length) return;\n    this.historyEmiter.emit(this.toggle);\n  }\n}\n","<div class=\"op pos-r\">\n    <!-- 选择图片 -->\n    <div class=\"pos-r\" >\n        <span class=\"iconfont icon-photo vm ml-1 csr\"></span>\n        <input type=\"file\" title=\"上传图片/文件\" class=\"pos-a file csr\"   (change)=\"getFile($event)\" [disabled]=\"isServer&& !who.userList.length\"/>\n        \n    </div>\n    <!-- 历史记录 -->\n    <span class=\"pos-a history-clock\" [class]=\"isServer?'':'d-none'\" (click)=\"getHistory()\">\n        <i id=\"historyIcon\" class=\"iconfont icon-clock mr-1 csr\"></i>\n    </span>\n</div>   \n\n","import {\n  Component,\n  EventEmitter,\n  Input,\n  OnInit,\n  Output,\n  SimpleChanges,\n} from '@angular/core';\nimport { DomSanitizer } from '@angular/platform-browser';\nimport { ComService } from 'src/app/core/com.service';\n\n@Component({\n  selector: 'send-area',\n  templateUrl: './send-area.component.html',\n  styleUrls: ['./send-area.component.css'],\n})\nexport class SendAreaComponent implements OnInit {\n  @Input() who: any;\n  // @Output() sendListen = new EventEmitter();\n  @Input() keepEnd: boolean = false;\n  isServer: boolean = false;\n  target = null;\n  constructor(private com: ComService, private _sanitizer: DomSanitizer) {}\n  hasHolder = true;\n  editText: string = '';\n  // 文件显示的angular循环注释节点\n  fileCommentNode: any = null;\n  ngOnInit(): void {\n    this.target = document.getElementById('editDiv');\n\n    this.isServer = 'rid' in this.who;\n    this.setEditDivUsable();\n  }\n  ngOnChanges(changes: SimpleChanges): void {\n\n    // 有新文件加入\n    this.newFileNode(this.who.files[this.who.files.length - 1]);\n    \n  }\n\n  newFileNode(file) {\n    if (file) {\n      let span: any = document.createElement('span');\n      span.id = file.fid;\n      span.contentEditable = false;\n      span.className = 'd-inline-block';\n      file.type === 'file' && (span.className += ' file-box');\n      if (file.type === 'img') {\n        let img: any = document.createElement('img');\n        img.src = file.src;\n        img.onerror = \"this.src='/assets/images/error.jpg'\";\n        span.appendChild(img);\n      } else {\n        let icon = document.createElement('i');\n        icon.className = 'iconfont icon-' + file.fileType;\n        span.appendChild(icon);\n        let link = document.createElement('a');\n        link.href = file.src;\n        link.textContent = file.name;\n        link.className = 'file-name';\n        span.appendChild(link);\n      }\n      this.target.appendChild(span);\n      this.keepLastIndex(this.target);\n    }\n  }\n  setBorder(d, e) {\n    d.border = !d.border;\n    let range = document.createRange();\n    range.selectNodeContents(e.target); // document.getElementById('test')\n    range.collapse(false);\n    let sel = window.getSelection();\n    sel.removeAllRanges();\n    sel.addRange(range);\n    this.editFocus();\n  }\n  // 不支持直接粘贴图片的情况下要用到这个函数\n  editPaste(e) {\n    var cbd = e.clipboardData;\n    console.log('editPaste: ', cbd);\n    var ua = window.navigator.userAgent;\n    console.log('ua: ', ua);\n    // 如果是 Safari 直接 return\n    if (!(e.clipboardData && e.clipboardData.items)) {\n      console.log('e.clipboardData: ', e.clipboardData);\n      return;\n    }\n    // Mac平台下Chrome49版本以下 复制Finder中的文件的Bug Hack掉\n    if (\n      cbd.items &&\n      cbd.items.length === 2 &&\n      cbd.items[0].kind === 'string' &&\n      cbd.items[1].kind === 'file' &&\n      cbd.types &&\n      cbd.types.length === 2 &&\n      cbd.types[0] === 'text/plain' &&\n      cbd.types[1] === 'Files' &&\n      ua.match(/Macintosh/i) &&\n      Number(ua.match(/Chrome\\/(\\d{2})/i)[1]) < 49\n    ) {\n      console.log('Mac Chorme49一下不支持贴图');\n      return;\n    }\n    !cbd.items.length && this.com.showAlert('只能粘贴截图');\n    for (var i = 0; i < cbd.items.length; i++) {\n      var item = cbd.items[i];\n      if (item.kind == 'file') {\n        // blob 就是从剪切板获得的文件 可以进行上传或其他操作\n        var blob = item.getAsFile();\n        if (blob.size === 0) {\n          return;\n        }\n      }\n      // 图片就预览 -文件也预览,可以上传的文件blob\n      if (item.type.indexOf('image') > -1) {\n        e.preventDefault();\n        this.com.preview(blob, (src) => {\n          // 如果前面是一个img标签且是data开头\n          let file = {\n            type: 'img',\n            src,\n            file: blob,\n            fid: 'img' + Date.now(),\n          }\n          this.who.files.push(file);\n          this.newFileNode(file);\n          this.keepLastIndex(this.target);\n        });\n      }\n    }\n  }\n  // 定位光标到最后\n  keepLastIndex(obj) {\n    if (window.getSelection) {\n      //ie11 10 9 ff safari\n      obj.focus(); //解决ff不获取焦点无法定位问题\n      var range = window.getSelection(); //创建range\n      range.selectAllChildren(obj);\n      range.collapseToEnd();\n    }\n  }\n  setEditDivUsable() {\n    // 服务端判断\n    if (this.isServer) {\n      this.who.userList.length &&\n        this.target.setAttribute('contenteditable', true);\n    } else {\n      this.target.setAttribute('contenteditable', true);\n    }\n  }\n  editFocus() {\n    this.hasHolder = false;\n  }\n  editBlur(e) {\n    this.editText = e.target.innerHTML;\n    this.hasHolder = !this.editText;\n  }\n\n  editInput(e) {\n    // console.log('editInput: ');\n  }\n  editKeyUp(e) {\n    if (e.keyCode === 13) {\n      // 回车发送\n      this.send();\n    }\n  }\n  ngAfterContentChecked(): void {\n    this.setEditDivUsable();\n  }\n  clickImg(e) {\n    this.com.previewOption.isShowMask = true;\n    this.com.previewOption.src = e.target.src;\n  }\n\n  send() {\n    let html = this.target.innerHTML;\n    \n    // 去掉注释节点-换行<br>成空\n    let div: any = document.createElement('div');\n    div.innerHTML = html;\n    let nodes: any = Array.from(div.childNodes);\n    for (let i = nodes.length; i--; ) {\n      let n = nodes[i];\n     \n      if (n.nodeType === 8) {\n        this.target.innerHTML = '';\n        this.target.appendChild(n);\n      }\n    }\n    let editTxt = div.innerHTML;\n    editTxt = editTxt.replace(/<br>/g, '').trim();\n\n    if (editTxt) {\n      // 分析editText\n      let content: any = { data: editTxt, mark: Date.now().toString() };\n      // 显示到聊天框右侧\n      content.isServer = this.isServer;\n      content.position = false;\n      this.who.chatList.push(content);\n      this.isServer && (content.rid = this.who.user.id);\n      this.com.jumpToChatBottom(this.who);\n\n      let count = 0;\n      this.who.files.forEach((file, i) => {\n        editTxt.indexOf(file.fid) === -1 && this.who.files.splice(i, 1);\n      });\n      console.log('this.who.files.length',this.who.files.length)\n      if (this.who.files.length) {\n        // 判断files 有没有删除掉\n        this.who.files.forEach((el) => {\n          this.com.uploadFile(\n            el,\n            (file, err?) => {\n              if (err) {\n                // 发送失败\n                let i = this.who.chatList.findIndex(\n                  (x) => x.mark === content.mark\n                );\n                i > -1 && (this.who.chatList[i].isUploaded = -1);\n              } else {\n                count++;\n                let span = null;\n                console.log(div.childNodes);\n                Array.from(div.childNodes).forEach((el: any) => {\n                  console.log('el.id: ', el.id);\n                  console.log('file.fid', file.fid);\n                  el.id === file.fid && (span = el);\n                });\n                try {\n                  if (file.type === 'img') {\n                    span.children[0].setAttribute('src', file.src);\n                  } else if (file.type === 'file') {\n                    span.children[1].setAttribute('href', file.src);\n                    span.children[1].setAttribute('download', file.name);\n                  }\n                } catch (e) {}\n                if (count === this.who.files.length) {\n                  content.data = div.innerHTML;\n                  this.sendMsg(content);\n                }\n              }\n            },\n            (file) => {\n              // chatList 显示进度条\n              // content.uploadProgress = file.uploadProgress;\n            }\n          );\n        });\n      } else {\n        // 没有文件时\n        this.sendMsg(content);\n      }\n    } else {\n      this.com.showAlert('请填写消息');\n    }\n    this.target.innerHTML = '';\n  }\n  sendMsg(content) {\n    console.log('sendMsg: ', content);\n    this.com.sendMsg(\n      content,\n      (data) => {\n        console.info('发送成功');\n        this.who.files = [];\n        let i = this.who.chatList.findIndex((x) => x.mark === content.mark);\n        i > -1 && (this.who.chatList[i].isUploaded = 1);\n        setTimeout(() => {\n          this.com.jumpToChatBottom(this.who);\n        }, 1000);\n      },\n      (res) => {\n        console.info('发送失败！', res);\n        // 失败-客户端就显示失败的消息到聊天框\n        if (res && res.msg === '客服不在线') {\n          let offline: any = {\n            data: '客服不在线,请过几分钟后再访问',\n            mark: Date.now().toString(),\n          };\n          offline.isServer = true;\n          offline.position = true;\n          this.who.chatList.push(offline);\n          setTimeout(() => {\n            this.com.jumpToChatBottom(this.who);\n          }, 1000);\n        } else {\n          let i = this.who.chatList.findIndex((x) => x.mark === content.mark);\n          i > -1 && (this.who.chatList[i].isUploaded = -1);\n          console.log('i', i);\n          setTimeout(() => {\n            this.com.jumpToChatBottom(this.who);\n          }, 1000);\n          this.com.showAlert(res.msg);\n        }\n      }\n    );\n  }\n}\n","<div class=\"send-area clearfix\">\n  <div name=\"editText\" class=\"textarea pos-r  vm  ie-scroll other-scroll\"\n    [class]=\"hasHolder?(isServer && !who.userList.length?'placeholder-disabled':'placeholder'):''\" (focus)=\"editFocus()\"\n    (blur)=\"editBlur($event)\" (input)=\"editInput($event)\" (keyup)=\"editKeyUp($event)\" id=\"editDiv\"\n    (paste)=\"editPaste($event)\">\n\n   <!-- <span *ngFor=\"let d of who.files\" contenteditable=\"false\" [class]=\"{border:d.border,'file-box':d.type==='file'}\"\n       [id]=\"d.fid\" class=\"d-inline-block \">\n       图片\n      <img [src]=\"d.src |toSafe:'url'\" *ngIf=\"d.type==='img'\" onerror=\"this.src='/assets/images/error.jpg'\" (click)=\"clickImg($event)\"/>\n    -->\n      <!-- 文件\n      <i class=\"iconfont \" [class]=\"'icon-'+d.fileType\" *ngIf=\"d.type==='file'\"></i>\n      <a class=\"file-name\" [href]=\"d.src||('javascript:void(0);'|toSafe:'url')\" *ngIf=\"d.type==='file'\" [title]=\"d.name\">{{d.name}}</a>\n     \n    </span> -->\n\n\n  </div>\n\n\n\n\n  <button class=\"bg-light-base fr vm csr\" (click)=\"send()\" [disabled]=\"isServer && !who.userList.length\">发送</button>\n</div>\n",";(function (undefined) {\n    var _global;\n    //工具函数\n    //配置合并\n    function extend (def,opt,override) {\n        for(var k in opt){\n            if(opt.hasOwnProperty(k) && (!def.hasOwnProperty(k) || override)){\n                def[k] = opt[k]\n            }\n        }\n        return def;\n    }\n    //日期格式化\n    function formartDate (y,m,d,symbol) {\n        symbol = symbol || '-';\n        m = (m.toString())[1] ? m : '0'+m;\n        d = (d.toString())[1] ? d : '0'+d;\n        return y+symbol+m+symbol+d\n    }\n \n    function Schedule (opt) {\n        var def = {},\n            opt = extend(def,opt,true),\n            curDate = opt.date ? new Date(opt.date) : new Date(),\n            year = curDate.getFullYear(),\n            month = curDate.getMonth(),\n            day = curDate.getDate(),  \n            currentYear = curDate.getFullYear(),\n            currentMonth = curDate.getMonth(),\n            currentDay = curDate.getDate(),\n            selectedDate = '',\n            el = document.querySelector(opt.el) || document.querySelector('body'),\n            _this = this;\n        var bindEvent = function (){\n            el.addEventListener('click',function(e){\n                switch (e.target.id) {\n                    case 'nextMonth': \n                        _this.nextMonthFun();\n                        break;\n                    case 'nextYear': \n                        _this.nextYearFun();\n                        break;\n                    case 'prevMonth': \n                        _this.prevMonthFun();\n                        break;\n                    case 'prevYear': \n                        _this.prevYearFun();\n                        break;\n                    default:\n                        break;\n                };\n                if(e.target.className.indexOf('currentDate') > -1){\n                    opt.clickCb && opt.clickCb(year, month+1, e.target.innerHTML);\n                    selectedDate = e.target.title;\n                    day = e.target.innerHTML;\n                    render();\n                }\n            },false)\n        }\n        var init = function () {\n            var scheduleHd = '<div class=\"schedule-hd\">'+\n                                '<div>'+\n                                    '<span class=\"icon iconfont icon-double-less-than\" id=\"prevYear\" title=\"上一年\"></span>'+\n                                    '<span class=\"arrow icon iconfont icon-less-than\" id=\"prevMonth\" title=\"上一月\"></span>'+\n                                '</div>'+\n                                '<div class=\"today\">'+formartDate(year,month+1,day,'-')+'</div>'+\n                                '<div>'+\n                                    '<span class=\"arrow icon iconfont icon-great-than\" id=\"nextMonth\" title=\"下一月\"></span>'+\n                                    '<span class=\"arrow icon iconfont icon-double-great-than\" id=\"nextYear\" title=\"下一年\"></span>'+\n                                '</div>'+\n                            '</div>'\n            var scheduleWeek = '<ul class=\"week-ul ul-box\">'+\n                                    '<li class=\"text-red\">日</li>'+\n                                    '<li>一</li>'+\n                                    '<li>二</li>'+\n                                    '<li>三</li>'+\n                                    '<li>四</li>'+\n                                    '<li>五</li>'+\n                                    '<li class=\"text-red\">六</li>'+\n                                '</ul>'\n            var scheduleBd = '<ul class=\"schedule-bd ul-box bg-white\" ></ul>'; \n            el.innerHTML = scheduleHd + scheduleWeek + scheduleBd;\n            bindEvent();\n            render();\n        }\n        var render = function () {\n            var fullDay = new Date(year,month+1,0).getDate(), //当月总天数\n            startWeek = new Date(year,month,1).getDay(), //当月第一天是周几\n            total = (fullDay+startWeek)%7 == 0 ? (fullDay+startWeek) : fullDay+startWeek+(7-(fullDay+startWeek)%7),//元素总个数\n            lastMonthDay = new Date(year,month,0).getDate(), //上月最后一天\n            eleTemp = [];\n            if(day > fullDay){\n                day = fullDay\n            }\n            for(var i = 0; i < total; i++){\n                if(i<startWeek){\n                    eleTemp.push('<li class=\"other-month\"><span class=\"dayStyle\">'+(lastMonthDay-startWeek+1+i)+'</span></li>')\n                }else if(i<(startWeek+fullDay)){\n                    var nowDate = formartDate(year,month+1,(i+1-startWeek),'-');\n                    var addClass = '';\n                    selectedDate == nowDate && (addClass = 'selected-style');\n                    formartDate(currentYear,currentMonth+1,currentDay,'-') == nowDate && (addClass = 'today-flag');\n                    eleTemp.push('<li class=\"current-month\" ><span title='+nowDate+' class=\"currentDate dayStyle '+addClass+'\">'+(i+1-startWeek)+'</span></li>')\n                }else{\n                    eleTemp.push('<li class=\"other-month\"><span class=\"dayStyle\">'+(i+1-(startWeek+fullDay))+'</span></li>')\n                }\n            }\n            el.querySelector('.schedule-bd').innerHTML = eleTemp.join('');\n            el.querySelector('.today').innerHTML = formartDate(year,month+1,day,'-');\n        };\n        this.nextMonthFun = function () {\n            if(month+1 > 11){\n                year += 1;\n                month = 0;\n            }else{\n                month += 1;\n            }\n            render();\n            opt.nextMonthCb && opt.nextMonthCb(year,month+1,day);\n        },\n        this.nextYearFun = function () {\n            year += 1;\n            render();\n            opt.nextYeayCb && opt.nextYeayCb(year,month+1,day);\n        },\n        this.prevMonthFun = function () {\n            if(month-1 < 0){\n                year -= 1;\n                month = 11;\n            }else{\n                month -= 1;\n            }\n            render();\n            opt.prevMonthCb && opt.prevMonthCb(year,month+1,day);\n        },\n        this.prevYearFun = function () {\n            year -= 1;\n            render();\n            opt.prevYearCb && opt.prevYearCb(year,month+1,day);\n        }\n        init();\n    }\n    //将插件暴露给全局对象\n    _global = (function(){return this || (0,eval)('this')}());\n    if(typeof module !== 'undefined' && module.exports){\n        module.exports = Schedule;\n    }else if (typeof define === \"function\" && define.amd){\n        define(function () {\n            return Schedule;\n        })\n    }else {\n        !('Schedule' in _global) && (_global.Schedule = Schedule);\n    }\n \n}());","// This file can be replaced during build by using the `fileReplacements` array.\n// `ng build --prod` replaces `environment.ts` with `environment.prod.ts`.\n// The list of file replacements can be found in `angular.json`.\n\nexport const environment = {\n  production: false\n};\n\n/*\n * For easier debugging in development mode, you can import the following file\n * to ignore zone related error stack frames such as `zone.run`, `zoneDelegate.invokeTask`.\n *\n * This import should be commented out in production mode because it will have a negative impact\n * on performance if an error is thrown.\n */\n// import 'zone.js/dist/zone-error';  // Included with Angular CLI.\n","import { enableProdMode } from '@angular/core';\nimport { platformBrowserDynamic } from '@angular/platform-browser-dynamic';\n\nimport { AppModule } from './app/app.module';\nimport { environment } from './environments/environment';\n\nif (environment.production) {\n  enableProdMode();\n}\n\nplatformBrowserDynamic().bootstrapModule(AppModule)\n  .catch(err => console.error(err));\n"],"sourceRoot":"webpack:///"}